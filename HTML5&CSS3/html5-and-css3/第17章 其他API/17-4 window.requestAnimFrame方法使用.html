<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>window.requestAnimFrame方法使用</title>
	<style>
		body{
			margin:0px;
			padding:0px;
		}
	</style>
	</head>
	<body>
	<script>
		//指定隔一段时间使页面显示效果产生变化
		window.requestAnimFrame=(function(){
			return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
			function()
			{
				window.setTimeout(callback,1000/60);//定义每秒执行60次动画
			};
		})();
		
		var canvas,context;
		init();
		animate();
		
		function init()
		{
			canvas=document.createElement('canvas');
			canvas.style.left=0;
			canvas.style.top=0;
			canvas.width=210;
			canvas.height=210;
			context=canvas.getContext('2d');
			document.body.appendChild(canvas);
		}
		
		function animate()
		{
			requestAnimFrame(animate);
			draw();
		}
		
		function draw()
		{
			var time=new Date().getTime()*0.002;
			var x=Math.sin(time)*96+105;
			var y=Math.cos(time*0.9)*96+105;
			context.fillStyle='pink';
			context.fillRect(0,0,255,255);
			context.fillStyle='rgb(255,0,0)';
			context.beginPath();
			context.arc(x,y,10,0,Math.PI*2,true);
			context.closePath();
			context.fill();
		}
	</script>	
	</body>
</html>
